!function(e,i){"use strict";if(e.CodeVeinBuilder={build:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],languages:{"0 - submit_translation":"submit","1 - English":"en"},presets:{"0 - 1h":{"High Scepter":["IIJgDAPsDsUBxQKxQCyopAwgTnhAolgIxEQBiAzMsEbsBaWSCBDqyGmVs0A","A build focused on high sustained damage from close and medium range with a variety of cc options and quick movement","u/KyrianBlackwood|fcbr05h"],"Knight of Ishtar":["IIZgjAPsCcWc8QQAxVQUVcAHHATHAGwQBiIArKXgCxVJmoDCujeSjsjYyQA","In certain situations one of the skills can be swapped for elemental damage or Gift Speed passive for Stamina,Health steal etc, build is very fast and depends on how good you are dodging but can kill anything Don't use spacebar to dodge with this build, your dodge is Swifting Hallow, ALWAYS keep your stamina for swings, cleared ng+6 with this, Increased Gift Speed will help you execute skills way faster and greatly redurce your risk of getting hit while using a skill","calypsoup|5"],"Sacrificial Edge":["IIJgLAPsCM0QDBAInUCqoBwQKKIMLQgSEDMEAYuJSMRUTefgJwnQDslkF8QA","A build that utilizes Sacrificial Edge and Bridge to Glory to greatly increase damage. Cleansing light is used to help reduce the effects of Sacrificial Edge, whereas Blood Sacrifice is used to restore ichor after buffing so you can spam your attack Gifts."],"The Yaksha":["IIJgrAPsDsEAwQCIEYonmqAOCBRBAwsqgEKSgBsEJsAYgMz0S0gAsEBI6KOnqtcIA","A build based on The Yaksha, Rin Murasame.<br><br>Utilizes Evasive Snare and Countermeasure to burn enemies when you dodge them. Flames of Rage can be used to set traps or as a combo finisher. Dancing Blaze should be used in tandem with Circulating Pulse to deliver a devastating combo attack. Lastly, make sure to buff with Blood Sucking Blades and Hunting Feast to help maintain your ichor for Evasive Snare and your active Gifts."],"Venom Thorn":["IITgPsCMlgDGARGBhe8oXMAHBATPAGIDsmEAzKYXgCxgBCuy4ye5iBYyNQA","This build has a strong emphasis on damage while still being able to poison effectively.<br><br>With the venom buff and circulating pulse, you can poison enemies very effectively and you even get a damage boost from opportunism once enemies are afflicted with venom.<br><br>This build can efficiently use Light and Dark gifts so equip whatever spell suits you and your situation. You also have feral tenacity that helps survival instincts as well as gift prowess for cast speed. Bridge to Glory also does wonders for the build while venom trap can make for interesting strategy setups as well as having a very good poison build up.<br><br>Survival instinct and swift destruction powers up your spells so you can expect to do respectable damage while being able to poison the enemies and most bosses.<br><br>Overall this build has damage, great mobility, and decent survivability.","u/IC_Ivory280|feesklf"]},"1 - 2h":{"Hyper-aggressive heavy caster":["IIJgbAPgQg7BAMEAiILEY4BGCBRHAwljtgKwREDMEAYiABxojmgCctlqBjwALNUVQ14QA","A two handed build focused on mobility, heavy weapons and magic. The plan is simple, don't get hit, the spells are chosen so you can do a lot of damage with minimal cast time, or to cover you when surrounded. Use swallow cutter after an attack or two to drop large enemies to the ground giving you free hits, spells are used to chip down enemies at range and sweep in for the kill, and the rest is for you to do a lot of damage. You can swap out judgement edge for any 2 handed weapon that takes your fancy, I prefer it for the large amount of damage from the charged heavy attack combined with blow of madness.","u/justicetree|fbfv950"],"Immortal Blade":["IIRgrAPgQiEAwQMICYKnm2wDMEBiIuAorHgCz7IAclke2C9FAIqS43EA","The fortified Zweihander has 100% defense when blocking, allowing you to withstand almost any attack. Throw on Iron Will and Cleansing Light to further boost your survivability, and save Foulblood Barrier for attacks that may one-shot you. For bosses, Life Steal can be swapped out for more health, balance, or a focus passive that boosts your defense."],"Improvise, Adapt, Overcome":["IIZgjAPgQgrBCiBOCw7ACwssS9P2wA4IBhANggDERNgAmOE5UZEuzNuSyNuoA","As the name suggests, it is a build to overcome any obstacle with many options as your disposal. You can simply buff yourself and go ham with the 2H, or have a hard hitting bayonet shot or spells as ranged options. If you manage to land a backstab, parry or charged drain, the extra attack from Venous comes in handy as well.<br><br>To recharge Ichor to keep up spells/buffs, the Devour mod in conjunction with Bloodsucking blade is enough.<br><br>Not really optimized for boss fights, but it still manages to be somewhat viable in them. Just don't get careless with your Thorn of Judgement casts.","u/Kzar96|f9odlyi"],"Queen Knight Countermeasure":["IIBgPuBCCMYMICYJmLVYCis7ScAHCtAGxgBiChAIgKznThm7wCc8hcAzJ+QCxA","Queen Knight / Queen Knight Reborn are especially weak to Guard Reversal as a lot of their attack are blockable and it took them longer to recover than other bosses. Each stun from Guard reversal allow player to land 2 Zweihander hits. His shield push (3rd hit of their normal combo) and his teleport are unblockable and therefore have to be dodged instead.<br><br>For gear, using Fortified Zweihander for 100% block. Since a lot of his attack can 1shot player in lighter veil like Noble silver; a high defensive veil like the GXL is recommended to minimize the risk.","u/srlynowwhat|fa9jsba"],"Swift Blade Dancer":["IIZgDAPgQgHBkBECMFiUsATKuBRFAwgOypICcEAYpnNQKxWYmUgAsEBm2BFnKlYIA","A two-handed sword build focused on quick mobility and attack spam. Buff up with Bridge to Glory and the two drain rating buffs to deal good damage while also draining tons of ichor. Due to this high drain rating, you should be able to spam all your attack Gifts, then following up with regular attacks to regain your ichor. Rinse and repeat for a decisive victory."]},"2 - halberd":{"Gliding Executioner":["IIJg7APgwgbBAMEAiBGCoHrcAHBAoiNCtipAGIgCcElRUAzIpQCzQ1Qj0rPxA","This build focuses on spamming the Assassin's Sickle special heavy charged attack. Apply all the buffs, especially Time Crunch to speed up the charge attack. Then harness the power of the Invading Executioner's glide attack to devastate your foes."],"One Hit Kill":["IIBgPgwgnG4CIEYzCeFyAcYCiAmZMEAbGAGK74QIAsZClCAzJAuBI8xFttUA","A build that can kill bosses in one hit, at least on NG. Use all buffs before a fight with Jack as a partner and use Fatal Surge last. Once ready, enter the boss room and activate Severing Abyss near the boss to destroy them."],"Queenslayer Halberdier":["IIBgPgwgrGwIzgnWz63AMTgZjAUQCZIjhcIBOSADjAwMo2xgm1w0ziKziA","This is basically a really reliable halberd build. The Black Halberd has a reliable move set compared to almost every other in its class, and with a Halberd passive, brings the damage up to at least 1519. With any Mind passive, you can get Bridge To Glory and Adrenaline can be used naturally. Shadow Assault is reliable for fast damage compared to Circulating Pulse, and Chariot Rush can be used in boss fights to really dish out damage. I recommend any veil with high Light Gift stats, but Dark Hounds is ok. Final Journey with both Adrenaline and Bridge to Glory combined with Shadow Assault and Chariot Rush gives some high damage numbers in a bosses down phase. And Panaceas Essence or Elemental Wall for whatever you need.","u/Slowhellob|f8bpj0t"],"The First Successor":["IIBgPuDCCsbAjHATGS5zABxgKIsgGyrwoBiSAnKlZNpAMz1ikAsqSb4pJQA","A somewhat flexible build that could be used with most Halberds so long they have Venom, Intensification, or Fortification applied to them. A free slot is there for any elemental/status buff depending on enemy or boss weaknesses.","u/TwistedDarkCloud|f9qt2e1"]},"3 - hammer":{"Shockwave Smasher":["IIZgDAPgIgTBlQIwWHSxnABwQKIggGEA2FRAdggDEYdCZJCQ4qQAWImZQgTiPGpggA","This build uses Precision and Impact Wave in an attempt to keep enemies stunlocked. Make sure to buff up with the prior Gifts along with Time Crunch, then spam the heavy charged attack with the Juggernaut Sledgehammer to unleash three rapid shockwave attacks. If paired with Bridge to Glory, this should do a lot of damage and stunlock the enemy a few times."],"Swift Tyrant":["IIZgDAPgIg7BlQIwWJSxnABwQKIggGE4MBOCAMQCYdqBWSquCkAFiKqqPMKuQrBA","A hammer build focused on quick mobility and attack spam. Buffing up with all the buffs will allow you to spam your attack Gifts along with draining tons of ichor with regular attacks to maintain this spam. Quick mobility will ensure you can easily dodge attacks with that sweet quick dodge."]},"4 - bayonet":{"Sacrificial Ranger":["IIJhB8FEE5wBnAEQIzzcVwAcUAs4BhWDAdkIGYFhycAxZCWkANkOQQJHwOVVriA","A bayonet build primarily focued on shot attacks. Ranged Impact and Overdrive should be used to boost your shot damage, and Gift Extension to help extend these skills. If no DLC, you can supplement GE with Cognitive Zeal for a little extra damage. Blood Sacrifice will ensure you can regain your ichor without having to get close to enemies, so you can stand back and shoot all day!"],"Supernatural Sniper":["IIJhB8FEE52WAiBGOLgBZXgMJIsADlQHYpNgVsBmFABhyvtyZEwDFNckg","This build focuses on Supernatural blood from the Hermonia blood code so you can shoot your bayonet even after you run out of ichor.<br><br><a href=\"https://youtu.be/_xx2JnYD-Lg\" target=\"_blank\">https://youtu.be/_xx2JnYD-Lg</a><br><br>Time crunch and charge accelerator helps with the speed of your charged shots while Overdrive and ranged impact helps with the overall damage.<br><br>Cleansing light helps with the health loss of supernatural blood. The shots don't take much away though so you can benefit nicely from it. You can also use spells with this build although I recommend low cost ichor gifts like blood shot.<br><br>You also have a free slot that you can equip anything you may need for certain situations, making this build very adaptable.<br><br>When I buff, I often start with gift extension then Cleansing light and supernatural blood then follow up with the rest.<br><br>Using your heals is necessary for this build so no damage runs are not recommended.<br><br>Overall this build focuses on shooting enemies from afar and continual shooting even after you're out of ichor so you don't need to be near enemies to regain it. You need to be good at dodging as your defenses aren't the best and always have pure blood on hand. Although Supernatural Blood lasts a while and gets extended further with gift extension, it will run out as you progress to higher difficulties where enemies have a higher health pool and higher defenses so keep that in mind.","u/IC_Ivory280|fdrl6ua"],"Molten Cannoneer":["IIRgzAPgogbBAMEAiILAEwLa4AOaALBAMIDs25xYiwB+AYiJgEKUiLHpHEir3xA","A build based on everyone's favorite Cannoneer. Focuses on devastating enemies with the flamethrower and fire Gifts. Use Ranged Impact, Overdrive, and Time Crunch, then spam Burning Disaster's flamethrower attack to your heart's content as you set the world on fire."],"Vampiric Ranger":["IIJhB8FEE4oRnAEQQBnMALOhwAcUsBhWQuBUtTAZnFIQDEQA2WsWkkBlIA","A bayonet build primarily focued on shot attacks. Ranged Impact and Overdrive should be used to boost your shot damage, and Gift Extension to help extend these skills. If no DLC, you can supplement GE with Cognitive Zeal for a little extra damage. Unlike the Sacrificial version, this one uses Brodiaea in close combat to restore ichor. Allowing you to save those tasty regenerations."]},"5 - dark_gifts":{"Blade Mage":["IIJgHAPsBsEKIE4oGYoBYoEYtdQYSTwHYpJhMlQQoRsAxABgj0wxcJAFYUwg","It allows you to use three elemental blades on cooldown rotation after using the three buffs (hasten to enhance swift destruction). To use this build effectively you must never attack with your physical weapon to keep merciless reaper in effect. Recharge ichor with chaotic ash and backstabs as you travel through dungeons. Though this build can be used in boss fights it is not optimized for them. Weapon is transformed to drain weapon as a backup in case you run out of ichor and you are unable to backstab. Alternatively you can remove a blade attack and use blood sacrifice if you dont mind the loss of hp for ichor. Gun is just an ideal long range solution but not necessary for the build to function.","u/doppledanger21|f84ratz"],"Frigid Blade Bearer":["IIJgHAPskAwQIgRiiCdjOhAonAwgJxSKqjogCsxAbFACwDMEeIqhzIyAYjEA","A build based on the lovely Blade Bearer. It uses frigid Gifts to freeze your foes solid along with high draing rating buffs to unleash an endless stream of icy hell that's sure to trigger some bad memories."],"Queen's Chaos":["IIJgHAPsBsEAwQCIEYoBZ5VcSxkggGFltlZQNgBmAViwHYorJCQDCBOIkVAMTiA","This is a magic build with a heavy focus on ichor restoration. Use your ichor spells to destroy the lost, then to regenerate your ichor, simply use Chaotic Ash or attack with all drain rating buffs active. Use Bridge to Glory to do extra damage while draining ichor with melee attacks OR swap it out for Gift Extension for longer drain rating buffs or Dark Shout to increase dark Gift damage. Aside from Lightning, you can use the following spell sets for exploiting weaknesses or when the element you're using isn't viable.<br><br><b>Blood:</b> Sanguine Roar + Vodnik Mass OR Purging Thorn<br><b>Fire:</b> Fire Storm OR Blazing Roar + Walpurgis Fire<br><b>Ice:</b> Guard of Honor + Baba Yaga's Gaze<br><b>Physical:</b> Arm of Set + Sands of Depravity<br><br>Volatile Storm is primarily used for large groups, so for bosses, you can swap it out for a single-target spell, a buff, resistance removal, etc."],"Sacrificial Storm Mage":["IIJgHAPgogDBcBEAs9WgsSwCMA2CAwtthtiqPqAJwYDMJwtkRKAYtiIdjazEA","A build that uses the three elements to bring ruin upon the lost. To boost your spell damage, make sure to buff up with Merciless Reaper and Cognitive Zeal, after this you may destory the lost. To restore ichor, utilize either Chaotic Ash or Blood Sacrifice. You want to avoid attacking with this build as to maintain Merciless Reaper."],"Sandstorm Lancer":["IIRgLAPgDBDCBMEAiJoWDYjQDYIFFsRsAOCAMXgGZ1VgqB2deSWATjnkXOM6qA","Impaler polearm has amazing light attack chain vs single target but poor tracking and almost no crowd control, so I cover it with AoE dark gift. The idea is to blast the enemies' face with Sand of Depravity to get rid of the fodder and finish the bigger one in melee, you should get all ichor back at the end of each fight. Add some long ranged spell like Blast bolt & blood shot to snipe bayonet lost from a distance. Bridge to glory & Swift destruction will keep melee damage very respectable.","u/srlynowwhat|f9otaxj"],"Successor of the Queen":["IIJgHAPgogLBBCIIBE7AAwWGpwCMAbFpAMJ55Z654CslA7JUcAMwCcEJISAYni5zxoWYIA","Emphasizing the Code's native Gifts, this build uses those Dark Gifts to deal a lot of damage quickly, with a quick Disremember to one cast out with max Ichor. Even if you don't get the elemental weakness of the enemy, it can deal a LOT of damage to them.<br><br>Before you get into a fight, always remember to have the Merciless Reaper buff active. As of the current Patch (1.20), it only goes away when any melee attack is used, but the Spell Gifts are free reign which does help damage more (about 4800 more damage with the buff active, from my personal testing in the Training Area)<br><br>When Ichor is low, Bloodsucking Blades with a high Drain-transformed weapon and the Weapon Drain Up allows you to quickly recover Ichor. Normal Attacks build around 4-5 Ichor, where a fully charged Heavy Attack can grant close to 19-20 if it can connect with all appicable buffs. Chaotic Ash's primary use is to cover for both Bloodsucking Blades' and Merciless Reaper's Ichor costs. Even with 0 Ichor, a quick swing of the Drain weapon can quickly allow you to use Chaotic Ash to apply Bloodsucking Blades and recover more Ichor quickly. Though if you prefer, you can switch out Chaotic Ash for a different active Gift of your choice.<br><br>The biggest weakness of this build is its relatively low defenses. This build can be described as a bit of a \"Glass Cannon.\" Eating attacks isn't really recommended. Especially if you choose a different Drain weapon with the Slow mobility. If you feel you're not too good with dodging in general, you can swap out Chaotic Ash for Cleansing Light to offset possible damage taken.<br><br>Side note, the weapons listed were primarily chosen for the \"Fashion\" sense while also being practical. For a little more effectiveness for the weapon damage and Drain rating, a Queenslayer Bayonet (no Transformation) and a hammer with the Drain transformation serve as better alternatives if you want to maximise weapon damage (for lower mobs) and Drain Rating respectively. However, keep in mind that one weapon MUST be of the Quick mobility to ensure Swift Destruction's damage is at its max. Plus, it does cover a lot of ground when dodging, so it doesn't hurt having the extra mobility.<br><br>The Veil being of Intensification transformation, if only barely, allows weapon Mobility to be better while also giving more damage (even if it's only 4 points), so it is important.<br><br>Nagimukro Drain is legit a personal choice. It's the best blend of style, drain, and damage at the cost of Mobility. But it has managed to serve well. If you want a Normal-mobility high-Drain weapon, your choices are either Sunset Greatsword, or Heavy Axe.","u/arachnidsGrip88|fejk3r6"],"The Twilight Mage":["IIRgLAPsAcEAwQCKWJBDQDYq2ATihAFZCB2KAZgCYoqRbIBhKiiR4pKhZqoA","This mage heavily focuses on dark gifts. Specifically lightning based spells. With Jupiter's Blade for close range to Perkunas for long range power, this mage is capable of casting very strong spells. Although Twilight is bugged, it's still nice to cast it and see it in action in my opinion. <a href='https://youtu.be/ENGzvxUcWek' target='_blank'>https://youtu.be/ENGzvxUcWek</a><br><br>This build uses survival instincts as it powers up your spells so having feral tenacity allows you to better use that passive while you also have a powerup from swift destruction and dark shout, though dark shout only works for one attack. I prefer to use it on Perkunas but it also works well on Twilight. Feral Tenacity also lasts until you take fatal damage so I always have it activated before I start any run with this build.<br><br>Iceblood is very light and allows you to be quick so you can benefit completely from swift destruction. It may not do the highest damage and the Argent Wolf out classes it but it's moveset still gets the job done as far as ichor collecting goes and it has a powerful regular strong attack, which is something I use often.<br><br>Overall this build has great damage, good survivability, and reliable mobility.","u/IC_Ivory280|fe38zz9"],"Vampiric Mage":["IIJgHAPsBsEAwQCIEYoBZ5VcSxkggGFltlZQNgBmAVihAE4oqnCQDDWRUAxOIA","This build focuses on attacking with both physical and magical attacks. Use your ichor spells to devastate the lost and your buffs to regenerate your lost ichor with melee attacks."]},"6 - light_gifts":{"BBC Countermeasure":["IIRgzAPgDNs-FQCY62EgLBAIuHIR8YBhJFYgTglMIDEog","A template build for countering Blade Bearer and Cannoneer. Utilize the elemental resist Gifts in conjunction with the elemental resist items to render their attacks useless. You can also go the extra mile and transform your Blood Veil with Fire or Ice resist.<br><br>Lastly, high ichor drain will help you maintain ichor for casting your resist gifts and offensive spells. Fill out the rest of the slots with whatever you prefer!"],Deliverance:["IIZgjAPgDNECKRjYkBiaBMEDCYvqyVhlQBYcBOCVAVmrCA","This is a support build for co-op that helps keep the host alive at the cost of your own life. Use Cleansing Light in tandem with Regenerator to ensure you can quickly recover your health while the host is being thrown around."],"Vampiric Blitzer":["IIRgrAPsBsEAwQCIigFnlFwAcECiCAwiFiAEyakWgDMadhZFhAnBIygGJxA","This build focuses on close range elemental barrage spells and high drain rating melee attacks. Simply run up to any boss, spam your barrage spells, then if it is still alive, attack it with melee to regain your ichor and repeat. BLITZKRIEG!"]},"7 - debuff":{"Lost Binder":["IIRgzAPsBsEAwQCIggYUg0UAcECimIuoATBAEJnkCsFICAYiQCxoCcaJZqA7BA3CA","A build for slowing enemies. Apply your buffs, with Binding Mark being used last. Then run up to an enemy/boss and activate Circulating Pulse to quickly build up Slow. If the enemy is not yet afflicted, you can finish the build up off with another Circulating Pulse or a projectile/trap gift."],"Paralytic Blade":["IIRgzAPsBsEAwQCIggYRQ0UAcECimIuoATBAEIrkAsFAnBAGIm2oOolmoCsTcQA","A build for stunning enemies. Apply your buffs, with Numbing Mark being used last. Then run up to an enemy/boss and activate Circulating Pulse to quickly build up Stun. If the enemy is not yet afflicted, you can finish the build up off with another Circulating Pulse or a projectile/trap gift."],"Venomous Serpent":["IITgPsCMlgDGARGBhe8oQBxgKLstgGIDsYAQvGQMzlEBMALGMuMnXc04bEA","A build for poisoning enemies. Apply your buffs, with Venom Mark being used last. Then run up to an enemy/boss and activate Circulating Pulse to quickly build up Venom. If the enemy is not yet afflicted, you can finish the build up off with another Circulating Pulse or a projectile/trap gift."]}},cache:{buildList:i.getElementById("build-list"),buildDesc:i.getElementById("build-desc"),build:[i.getElementById("blood-code"),i.getElementById("weapon-1"),i.getElementById("weapon-2"),i.getElementById("blood-veil"),i.getElementById("transform-1"),i.getElementById("transform-2"),i.getElementById("transform-3"),i.getElementById("passive-1"),i.getElementById("passive-2"),i.getElementById("passive-3"),i.getElementById("passive-4"),i.getElementById("active-1"),i.getElementById("active-2"),i.getElementById("active-3"),i.getElementById("active-4"),i.getElementById("active-5"),i.getElementById("active-6"),i.getElementById("active-7"),i.getElementById("active-8")],infoColumn:{status:i.getElementById("status-info"),options:i.getElementById("options")},selector:{window:i.getElementById("selector-window"),box:i.getElementById("selector-box"),infoTop:i.getElementById("selector-info-top"),infoBottom:i.getElementById("selector-info-bottom")}},data:{order:{},dummy:{blood_code:{mobility:"none",weight:0,stats:{str:0,dex:0,mnd:0,wil:0,vit:0,for:0},ichor:{min:0,max:0}},equipment:{scaling:{str:0,dex:0,mnd:0,wil:0,vit:0,for:0}},active:{ichor_cost:0,cooldown:0,physical:0,elemental:0,usage_req:0}}},status:{stats:{str:0,dex:0,mnd:0,wil:0,vit:0,for:0},ichor:{min:0,max:0},weight:{weapon_1:0,transform_4:0,weapon_2:0,transform_5:0,blood_veil:0,transform_6:0,max:0,max_multiplier:0},values:["stats","ichor"],key:["-","E","E+","D","D+","C","C+","B","B+","A","A+","S","S+"],mobiKey:{none:-1},update:function(e){var i,a,o=0==e.type?"blood_code":1==e.type||2==e.type?"weapon":3==e.type?"blood_veil":4==e.type||5==e.type||6==e.type?"transform":"passive",t=0==e.id||e.oldId&&0!=e.oldId?CodeVeinBuilder.data[o][e.oldId]:null,s=0!=e.id?CodeVeinBuilder.data[o][e.id]:null,l=CodeVeinBuilder.status.values,n=l.length;if(t){if(/blood_code|passive/.test(o))for(i=0;i<n;i++)if(t[l[i]])for(a in t[l[i]])CodeVeinBuilder.status[l[i]][a]-=t[l[i]][a];switch(o){case"blood_code":CodeVeinBuilder.status.weight.max-=t.weight;break;case"weapon":CodeVeinBuilder.status.weight["weapon_"+e.type]-=t.weight;break;case"blood_veil":CodeVeinBuilder.status.weight.blood_veil-=t.weight;break;case"transform":(t.dec_weight||t.inc_weight)&&(CodeVeinBuilder.status.weight["transform_"+e.type]-=t.dec_weight?t.dec_weight:6==e.type?t.inc_weight.blood_veil:t.inc_weight.weapon);break;case"passive":"A19"==e.oldId&&(CodeVeinBuilder.status.weight.max_multiplier-=t.inc_max_weight)}}if(s){if(/blood_code|passive/.test(o))for(i=0;i<n;i++)if(s[l[i]])for(a in s[l[i]])CodeVeinBuilder.status[l[i]][a]+=s[l[i]][a];switch(o){case"blood_code":CodeVeinBuilder.status.weight.max+=s.weight;break;case"weapon":CodeVeinBuilder.status.weight["weapon_"+e.type]+=s.weight;break;case"blood_veil":CodeVeinBuilder.status.weight.blood_veil+=s.weight;break;case"transform":(s.dec_weight||s.inc_weight)&&(CodeVeinBuilder.status.weight["transform_"+e.type]+=s.dec_weight?s.dec_weight:6==e.type?s.inc_weight.blood_veil:s.inc_weight.weapon);break;case"passive":"A19"==e.id&&(CodeVeinBuilder.status.weight.max_multiplier+=s.inc_max_weight)}}},get:{weight:function(e,i){for(var a,o,t,s={},l=e||CodeVeinBuilder.status.weight,n=i||CodeVeinBuilder.data.blood_code[CodeVeinBuilder.build[0]],r=["max","weapon_1","weapon_2","blood_veil","total_1","total_2","mobility_1","mobility_2"],d=0,u=r.length;d<u;d++)if("max"==r[d])s[r[d]]=_parseVal(l.max*(l.max_multiplier||1));else if(/weapon_|blood_veil/.test(r[d]))a="blood_veil"==r[d]?6:+r[d].replace("weapon_","")+3,s[r[d]]=_parseVal("A0"==CodeVeinBuilder.build[a]?l[r[d]]/l["transform_"+a]:l[r[d]]*(l["transform_"+a]||1));else if(/total_/.test(r[d]))s[r[d]]=_parseVal(s["weapon_"+r[d].replace("total_","")]+s.blood_veil);else if(/mobility_/.test(r[d]))if(n)switch(o=s["total_"+r[d].replace("mobility_","")],t=s.max,CodeVeinBuilder.status.mobiKey[n.mobility]){case 0:s[r[d]]=o>t/2?_lang.mobi.slow:o<=t/2&&o>t/5?_lang.mobi.normal:_lang.mobi.quick;break;case 1:s[r[d]]=o>=t?_lang.mobi.slow:o<t&&o>t/2?_lang.mobi.normal:_lang.mobi.quick;break;case 2:s[r[d]]=o>1.35*t?_lang.mobi.slow:o<=1.35*t&&o>=t?_lang.mobi.normal:_lang.mobi.quick}else s[r[d]]=_lang.na;return s}},display:function(){var e,i=CodeVeinBuilder.data.blood_code[CodeVeinBuilder.build[0]]||{name:"-",mobility:"-"},a="",o=CodeVeinBuilder.status.get.weight();for(e in CodeVeinBuilder.status.stats)a+='<div class="info-row"><span class="info-label"><span class="t-darker">'+e.toUpperCase()+"</span> "+_lang[e]+'</span><span class="info-value">'+CodeVeinBuilder.status.key[CodeVeinBuilder.status.stats[e]>12?12:CodeVeinBuilder.status.stats[e]]+"</span></div>";CodeVeinBuilder.cache.infoColumn.status.innerHTML='<div id="stats-window" class="ui-window"><div class="ui-title">'+_lang.status+'</div><div class="ui-window-inner"><div class="info-group"><div class="info-row"><span class="info-label">'+_lang.blood_code+'</span><span class="info-value">'+i.name+'</span></div><div class="info-row"><span class="info-label">'+_lang.ichor+'</span><span class="info-value">'+CodeVeinBuilder.status.ichor.min+" ("+CodeVeinBuilder.status.ichor.max+')</span></div><div class="info-row"><span class="info-label">'+_lang.mobi.base+'</span><span class="info-value">'+i.mobility+'</span></div></div><div class="info-group">'+a+'</div><div class="info-group"><div class="info-row"><span class="info-label">'+_lang.mobility+' 1</span><span class="info-value">'+o.mobility_1+" ("+o.total_1+"/"+o.max+')</span></div><div class="info-row"><span class="info-label">'+_lang.mobility+' 2</span><span class="info-value">'+o.mobility_2+" ("+o.total_2+"/"+o.max+")</span></div></div></div></div>"},check:{stats:function(e,i,a){if(CodeVeinBuilder.data[e][i]){var o,t=CodeVeinBuilder.build,s=CodeVeinBuilder.data[e][i].required,l=CodeVeinBuilder.data[e][i].blood_code_req,n=CodeVeinBuilder.data[e][i].weapon_req,r="",d="ui-stats-bad";if(l&&t[0]!=l&&(r=d),!n||0!=t[1]&&-1!=n.indexOf(t[1].charAt(0))||0!=t[2]&&-1!=n.indexOf(t[2].charAt(0))||(r=d),s&&r!=d)for(o in s)if((a||CodeVeinBuilder.status.stats)[o]<s[o]){r=d;break}return r}return""},equipped:function(){for(var e,i,a,o=[1,2,3,7,8,9,10,11,12,13,14,15,16,17,18],t=0,s=o.length;t<s;t++)e=CodeVeinBuilder.cache.build[o[t]],(i=CodeVeinBuilder.status.check.stats(e.dataset.type,e.dataset.id))&&!/ui-stats-bad/.test(e.className)?(e.className+=" "+i,a=!0):!i&&/ui-stats-bad/.test(e.className)&&(e.className=e.className.replace(" ui-stats-bad",""));a&&CodeVeinBuilder.alert.open(_lang.equip_error)}},reset:function(){for(var e,i=CodeVeinBuilder.status.values,a=0,o=i.length;a<o;a++)for(e in CodeVeinBuilder.status[i[a]])CodeVeinBuilder.status[i[a]][e]=0;for(a in CodeVeinBuilder.status.weight)CodeVeinBuilder.status.weight[a]=0}},alert:{isOpen:!1,open:function(a){CodeVeinBuilder.alert.isOpen&&CodeVeinBuilder.alert.close(!0);var o=i.createElement("DIV");o.id="cv-alert",o.className="alert-closed",o.innerHTML='<div id="cv-alert-body"><div id="cv-alert-icon" class="icon-glow"><i class="fa">&#xf05a;</i></div><div id="cv-alert-text"><p>'+a+"</p></div></div>",o.onclick=function(){CodeVeinBuilder.alert.close(!0)},i.body.appendChild(o),CodeVeinBuilder.cache.alert=o,CodeVeinBuilder.alert.isOpen=!0,e.setTimeout(function(){CodeVeinBuilder.alert.isOpen&&(CodeVeinBuilder.cache.alert.className="",CodeVeinBuilder.cache.alert.querySelector("#cv-alert-icon").className="")},150),CodeVeinBuilder.alert.timeout=e.setTimeout(CodeVeinBuilder.alert.close,4e3)},close:function(i){CodeVeinBuilder.alert.timeout&&(e.clearTimeout(CodeVeinBuilder.alert.timeout),delete CodeVeinBuilder.alert.timeout),i?CodeVeinBuilder.alert.remove():(CodeVeinBuilder.cache.alert.className="alert-closed",CodeVeinBuilder.cache.alert.style.opacity=0,CodeVeinBuilder.alert.closeTimeout=e.setTimeout(CodeVeinBuilder.alert.remove,500))},remove:function(){CodeVeinBuilder.alert.closeTimeout&&(e.clearTimeout(CodeVeinBuilder.alert.closeTimeout),delete CodeVeinBuilder.alert.closeTimeout),i.body.removeChild(CodeVeinBuilder.cache.alert),CodeVeinBuilder.alert.isOpen=!1}},scrollTo:function(e,a,o){"string"==typeof e&&(e=i.querySelector(e)),"string"==typeof a&&(a=i.querySelector(a)),o=o||0,(a||i.body).scrollTop=e.offsetTop+o,a||(i.documentElement.scrollTop=e.offsetTop+o)},selector:{isOpen:!1,activeCaller:null,open:function(e,a){for(var o,t,s,l,n=CodeVeinBuilder.cache.build[a],r="",d=1!=a&&2!=a&&3!=a||0==CodeVeinBuilder.build[a+3]?"":'<div class="ui-transform" style="background-image:url('+CodeVeinBuilder.getImage("transform",CodeVeinBuilder.build[a+3])+')"></div>',u='<div class="ui-block ui-'+e+'" data-type="remove" data-id="0" onmouseover="CodeVeinBuilder.selector.showInfo(this);" onclick="CodeVeinBuilder.selector.change(this, '+a+');" title="remove"></div>',c=0,h=CodeVeinBuilder.data.order[e].length;c<h;c++)l=CodeVeinBuilder.data.order[e][c],t=CodeVeinBuilder.selector.isEquipped(e,l,n.dataset.id),o=CodeVeinBuilder.status.check.stats(e,l),u+='<div class="ui-block ui-'+e+("transform"==e&&n.dataset.id==l?" ui-equipped ui-active-selection":t.className)+(o?" "+o:"")+'" data-type="'+e+'" data-id="'+l+'" '+t.slot+'style="background-image:url('+CodeVeinBuilder.getImage(e,l)+')" onmouseover="CodeVeinBuilder.selector.showInfo(this);" onclick="CodeVeinBuilder.selector.change(this, '+a+');" >'+d+"</div>";if(CodeVeinBuilder.selector.group[e]){r+='<div class="ui-title ui-groups ui-group-list-'+e+'">';for(l in CodeVeinBuilder.selector.group[e])r+='<span class="ui-group-option ui-group-'+CodeVeinBuilder.selector.group[e][l]+(0==l?" ui-group-active":"")+'" onclick="CodeVeinBuilder.selector.toggleGroup(\''+l+'\', this)" style="background-image:url('+CodeVeinBuilder.getImage("group",CodeVeinBuilder.selector.group[e][l])+')"></span>';r+="</div>"}CodeVeinBuilder.cache.selector.box.innerHTML=(r||'<div class="ui-title">'+_lang[e]+(/\d/.test(n.id)?n.id.replace(/.*?-(\d+)/," $1"):"")+"</div>")+'<div id="selector-options">'+u+"</div>",CodeVeinBuilder.selector.isOpen=!0,CodeVeinBuilder.selector.activeCaller=a,CodeVeinBuilder.cache.buildList.style.display="none",CodeVeinBuilder.cache.selector.window.style.display="",CodeVeinBuilder.scrollTo(CodeVeinBuilder.cache.selector.window,0,-5),CodeVeinBuilder.cache.selector.list=i.getElementById("selector-options"),CodeVeinBuilder.cache.selector.options=CodeVeinBuilder.cache.selector.list.querySelectorAll(".ui-block"),s=CodeVeinBuilder.cache.selector.list.querySelector('[data-id="'+(0==n.dataset.id?"A0":n.dataset.id)+'"]'),CodeVeinBuilder.selector.showInfo(s),CodeVeinBuilder.scrollTo(s,CodeVeinBuilder.cache.selector.list,"blood_code"==e?-85:-95)},close:function(){CodeVeinBuilder.selector.isOpen=!1,CodeVeinBuilder.selector.activeCaller=null,CodeVeinBuilder.cache.buildList.style.display="",CodeVeinBuilder.cache.selector.window.style.display="none"},isEquipped:function(e,i,a){var o,t,s,l={className:"",slot:""};if("transform"!=e){switch(e){case"blood_code":o=CodeVeinBuilder.cache.build.slice(0,1);break;case"weapon":o=CodeVeinBuilder.cache.build.slice(1,3);break;case"blood_veil":o=CodeVeinBuilder.cache.build.slice(3,4);break;case"passive":o=CodeVeinBuilder.cache.build.slice(7,11);break;case"active":o=CodeVeinBuilder.cache.build.slice(11,19)}for(t=0,s=o.length;t<s;t++)if(o[t].dataset.id==i){l.className=" ui-equipped"+(i==a?" ui-active-selection":""),l.slot='data-slot="'+CodeVeinBuilder.cache.build.indexOf(o[t])+'"';break}}return l},group:{weapon:{0:"all",A:"1h",B:"2h",C:"halberd",D:"hammer",E:"bayonet"},blood_veil:{0:"all",A:"ogre",B:"stinger",C:"hounds",D:"ivy"},passive:{0:"all",A:"buff",B:"def",C:"stats",D:"focus",E:"mastery",F:"misc"},active:{0:"all",A:"spell",B:"debuff",C:"buff",D:"def",E:"communal",F:"misc"}},toggleGroup:function(e,a){for(var o=i.querySelector(".ui-group-active"),t=CodeVeinBuilder.cache.selector.options,s=0,l=t.length;s<l;s++)0!=t[s].dataset.id&&(0==e||t[s].dataset.id.charAt(0)==e?t[s].style.display="":t[s].dataset.id.charAt(0)!=e&&(t[s].style.display="none"));for(o.className=o.className.replace(" ui-group-active",""),a.className+=" ui-group-active",s=0;s<l;s++)if("none"!=t[s].style.display&&0!=t[s].dataset.id){o=t[s];break}CodeVeinBuilder.selector.showInfo(o)},active:null,moveActive:function(e){var i=CodeVeinBuilder.selector.active,a=CodeVeinBuilder.cache.selector.list,o=i.dataset.type,t=!0;switch(e){case"left":for(;t;)"none"!=(i=i.previousSibling?i.previousSibling:a.lastChild).style.display&&(t=!1);CodeVeinBuilder.selector.showInfo(i),CodeVeinBuilder.scrollTo(i,a,"blood_code"==o?-85:-95);break;case"right":for(;t;)"none"!=(i=i.nextSibling?i.nextSibling:a.firstChild).style.display&&(t=!1);CodeVeinBuilder.selector.showInfo(i),CodeVeinBuilder.scrollTo(i,a,"blood_code"==o?-85:-95)}},showInfo:function(e){var i,a,o,t,s=e.dataset.type,l=e.dataset.id,n="";if(CodeVeinBuilder.selector.active&&(CodeVeinBuilder.selector.active.className=CodeVeinBuilder.selector.active.className.replace(" info-active","")),CodeVeinBuilder.selector.active=e,e.className+=" info-active",o=0==l?null:CodeVeinBuilder.data[s][l].origin,CodeVeinBuilder.cache.selector.infoTop.innerHTML=0==l?'<div class="'+e.className.replace(" info-active","")+'"></div><div class="item-info"><div class="item-title">'+_lang.remove+'</div><div class="hr"></div><div class="item-desc">'+_lang.remove_desc+"</div></div>":'<div class="'+e.className.replace(" info-active","")+'" style="background-image:url('+CodeVeinBuilder.getImage(s,l)+');"></div><div class="item-info"><div class="item-title">'+CodeVeinBuilder.data[s][l].name+(CodeVeinBuilder.data[s][l].dlc?' <span class="tag tag-dlc">'+_lang.dlc+"</span>":"")+'</div><div class="hr"></div>'+(CodeVeinBuilder.data[s][l].owner?'<div class="code-owner"><span class="t-darker">'+_lang.code_owner+"</span> "+CodeVeinBuilder.data[s][l].owner+"</div>":"")+(o?'<div class="gift-origin"><span class="t-darker">'+_lang.origin+"</span> "+(/^rvm|^cor/.test(o)?_lang["r"==o.charAt(0)?"rv_mastery":"companion_rank"]+" ("+o.slice(3)+")":CodeVeinBuilder.data.blood_code[o].name)+(CodeVeinBuilder.data[s][l].blood_code_req?' <span class="tag tag-exclusive" title="'+_lang.exclusive+'"><i class="fa">&#xf005;</i></span>':"")+"</div>":"")+'<div class="item-desc">'+CodeVeinBuilder.data[s][l].desc+"</div></div>",i=0==l?0:CodeVeinBuilder.data[s][CodeVeinBuilder.cache.build[CodeVeinBuilder.selector.activeCaller].dataset.id],"blood_code"==s){var r,d,u=CodeVeinBuilder.data[s][l];i=i||CodeVeinBuilder.data.dummy.blood_code,r=u.ichor.min>i.ichor.min?" stat-good":u.ichor.min<i.ichor.min?" stat-bad":"",g={current:CodeVeinBuilder.status.mobiKey[i.mobility],hover:CodeVeinBuilder.status.mobiKey[u.mobility]},d={current:_parseVal(i.weight*(CodeVeinBuilder.status.weight.max_multiplier||1)),hover:_parseVal(u.weight*(CodeVeinBuilder.status.weight.max_multiplier||1))},n+='<div class="info-group"><div class="info-row"><span class="info-label">'+_lang.ichor+'</span><span class="info-value">'+u.ichor.min+" ("+u.ichor.max+")"+(r?' <span class="'+r+'">('+(" stat-good"==r?"+":"-")+Math.abs(u.ichor.min-i.ichor.min)+")":"")+'</span></span></div><div class="info-row"><span class="info-label">'+_lang.mobi.base+'</span><span class="info-value'+(g.hover>g.current?" stat-good":g.hover<g.current?" stat-bad":"")+'">'+u.mobility+'</span></div><div class="info-row"><span class="info-label">'+_lang.weight_limit+'</span><span class="info-value">'+d.hover+(d.hover==d.current?"":' <span class="'+(d.hover>d.current?"stat-good":d.hover<d.current?"stat-bad":"")+'">('+(d.hover>d.current?"+":d.hover<d.current?"-":"")+_parseVal(Math.abs(d.hover-d.current))+")</span>")+'</span></div></div><div class="info-group">';for(t in u.stats)a=u.stats[t],n+='<div class="info-row"><span class="info-label"><span class="t-darker">'+t.toUpperCase()+"</span> "+_lang[t]+'</span><span class="info-value'+(a>i.stats[t]?" stat-good":a<i.stats[t]?" stat-bad":"")+'">'+CodeVeinBuilder.status.key[a>12?12:a]+"</span></div>";n+="</div>";var c=CodeVeinBuilder.status.get.weight(),h={};for(t in CodeVeinBuilder.status.weight)h[t]="max"==t?u.weight:CodeVeinBuilder.status.weight[t];h=CodeVeinBuilder.status.get.weight(h,u),g={current:[CodeVeinBuilder.status.mobiKey[c.mobility_1],CodeVeinBuilder.status.mobiKey[c.mobility_2]],hover:[CodeVeinBuilder.status.mobiKey[h.mobility_1],CodeVeinBuilder.status.mobiKey[h.mobility_2]]},n+='<div class="info-group"><div class="info-row"><span class="info-label">'+_lang.mobility+' 1</span><span class="info-value"><span class="'+(g.hover[0]>g.current[0]?"stat-good":g.hover[0]<g.current[0]?"stat-bad":"")+'">'+h.mobility_1+"</span> ("+c.total_1+"/"+h.max+')</span></div><div class="info-row"><span class="info-label">'+_lang.mobility+' 2</span><span class="info-value"><span class="'+(g.hover[1]>g.current[1]?"stat-good":g.hover[1]<g.current[1]?"stat-bad":"")+'">'+h.mobility_2+"</span> ("+c.total_2+"/"+h.max+")</span></div></div>"}else if(/weapon|blood_veil/.test(s)){i=i?i.scaling:CodeVeinBuilder.data.dummy.equipment.scaling,n+='<div class="info-group"><div class="info-group-title">'+_lang.stat_scaling+"</div>";for(t in CodeVeinBuilder.status.stats)a=CodeVeinBuilder.data[s][l].scaling[t],n+='<div class="info-row"><span class="info-label"><span class="t-darker">'+t.toUpperCase()+"</span> "+_lang[t]+'</span><span class="info-value'+(a>i[t]?" stat-good":a<i[t]?" stat-bad":"")+'">'+CodeVeinBuilder.status.key[a>12?12:a]+"</span></div>";if(n+="</div>",CodeVeinBuilder.data[s][l].required){n+='<div class="info-group required-stats"><div class="info-group-title">'+_lang.required_stats+"</div>";for(t in CodeVeinBuilder.data[s][l].required)a=CodeVeinBuilder.data[s][l].required[t],n+='<div class="info-row"><span class="info-label"><span class="t-darker">'+t.toUpperCase()+"</span> "+_lang[t]+'</span><span class="info-value'+(CodeVeinBuilder.status.stats[t]<a?" stat-bad":"")+'">'+CodeVeinBuilder.status.key[a>12?12:a]+"</span></div>";n+="</div>";var g,p,f,b=CodeVeinBuilder.selector.activeCaller;c=CodeVeinBuilder.status.get.weight(),h={};for(t in CodeVeinBuilder.status.weight)h[t]="weapon_1"==t&&1==b||"weapon_2"==t&&2==b||"blood_veil"==t&&3==b?CodeVeinBuilder.data[s][l].weight:CodeVeinBuilder.status.weight[t];h=CodeVeinBuilder.status.get.weight(h),g={current:[CodeVeinBuilder.status.mobiKey[c.mobility_1],CodeVeinBuilder.status.mobiKey[c.mobility_2]],hover:[CodeVeinBuilder.status.mobiKey[h.mobility_1],CodeVeinBuilder.status.mobiKey[h.mobility_2]]},p=1==b?c.weapon_1:2==b?c.weapon_2:c.blood_veil,f=1==b?h.weapon_1:2==b?h.weapon_2:h.blood_veil,n+='<div class="info-group"><div class="info-row"><span class="info-label">'+_lang.weight+'</span><span class="info-value">'+f+(f==p?"":' <span class="'+(f>p?"stat-bad":f<p?"stat-good":"")+'">('+(f>p?"+":f<p?"-":"")+_parseVal(Math.abs(p-f))+")</span>")+"</span></div>"+(1==b||3==b?'<div class="info-row"><span class="info-label">'+_lang.mobility+' 1</span><span class="info-value"><span class="'+(g.hover[0]>g.current[0]?"stat-good":g.hover[0]<g.current[0]?"stat-bad":"")+'">'+h.mobility_1+"</span> ("+h.total_1+"/"+h.max+")</span></div>":"")+(2==b||3==b?'<div class="info-row"><span class="info-label">'+_lang.mobility+' 2</span><span class="info-value"><span class="'+(g.hover[1]>g.current[1]?"stat-good":g.hover[1]<g.current[1]?"stat-bad":"")+'">'+h.mobility_2+"</span> ("+h.total_2+"/"+h.max+")</span></div>":"")+"</div>"}}else if("passive"==s){var m=CodeVeinBuilder.data[s][l];n+='<div class="info-row"><span class="info-sub-group"><span class="info-label">'+_lang.tree.title+'</span><span class="info-value">'+m.tree+'</span></span><span class="info-sub-group"><span class="info-label">'+_lang.gift_type+'</span><span class="info-value">'+_lang.passive+'</span></span></div><div class="hr"></div>'+(m.usage_req?'<div class="skill-info-list"><div class="info-row"><span class="info-label">'+_lang.usage_req+'</span><span class="info-value'+(m.blood_code_req&&CodeVeinBuilder.build[0]!=m.blood_code_req?" stat-bad":"")+'">'+m.usage_req+'</span></div></div><div class="hr"></div>':"")+'<div class="info-group"><div class="info-group-title"><span class="t-darker">'+_lang.required_stats+'</span></div><div class="info-row"><span class="info-label no-value">'+_lang.none+"</span></div></div>"}else if("active"==s){var v,y=CodeVeinBuilder.data[s][l],B="";if(y.weapon_req)for(v in CodeVeinBuilder.selector.group.weapon)0!=v&&(B+='<img src="'+CodeVeinBuilder.getImage("group",CodeVeinBuilder.selector.group.weapon[v])+'" class="weapon-'+(-1!=y.weapon_req.indexOf(v)?"valid":"invalid")+'" title="'+_lang[CodeVeinBuilder.selector.group.weapon[v]]+'">');n+='<div class="info-row"><span class="info-sub-group"><span class="info-label">'+_lang.tree.title+'</span><span class="info-value">'+CodeVeinBuilder.data[s][l].tree+(B?'<span class="weapon-requirement">'+B+"</span>":"")+'</span></span><span class="info-sub-group"><span class="info-label">'+_lang.gift_type+'</span><span class="info-value">'+_lang.active+'</span></span></div><div class="hr"></div>',n+='<div class="skill-info-list">';for(t in CodeVeinBuilder.data.dummy.active)n+='<div class="info-row"><span class="info-label">'+_lang[t]+'</span><span class="info-value'+("usage_req"==t&&y.blood_code_req&&CodeVeinBuilder.build[0]!=y.blood_code_req?" stat-bad":"")+'">'+(y[t]?y[t]+("cooldown"==t?" "+_lang.seconds:""):"-")+"</span></div>";if(n+='</div><div class="hr"></div>',n+='<div class="info-group skill-info-list"><div class="info-group-title"><span class="t-darker">'+_lang.required_stats+"</span></div>",y.required){for(t in y.required)a=y.required[t],n+='<div class="info-row"><span class="info-label"><span class="t-darker">'+t.toUpperCase()+"</span> "+_lang[t]+'</span><span class="info-value'+(CodeVeinBuilder.status.stats[t]<a?" stat-bad":"")+'">'+CodeVeinBuilder.status.key[a>12?12:a]+"</span></div>";n+="</div>"}else n+='<div class="info-row"><span class="info-label no-value">'+_lang.none+"</span></div></div>"}CodeVeinBuilder.cache.selector.infoBottom.innerHTML="transform"==s||0==l?"":'<div class="ui-window-inner'+(/active|passive/.test(s)?" skill-info":/weapon|blood_/.test(s)?" status-info":"")+'">'+n+"</div>"},change:function(e,i){var a,o,t=e.dataset.type,s=e.dataset.id,l=CodeVeinBuilder.cache.build[i],n=l.dataset.id;!{0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1}[i]||e.dataset.slot&&!{1:1,2:1}[i]||s==n||(CodeVeinBuilder.status.update({type:i,id:s,oldId:n}),e.dataset.slot&&{1:1,2:1}[i]&&CodeVeinBuilder.status.update({type:1==i?2:1,id:n,oldId:s}),a=!0),e.dataset.slot&&!/ui-active-selection/.test(e.className)&&(o=CodeVeinBuilder.cache.build[e.dataset.slot],n=l.dataset.id,CodeVeinBuilder.build[e.dataset.slot]=n,o.dataset.id=n,o.style.backgroundImage=l.style.backgroundImage?"url("+CodeVeinBuilder.getImage(t,n)+")":""),CodeVeinBuilder.build[i]=s,l.dataset.id=s,l.style.backgroundImage="remove"==t?"":"url("+CodeVeinBuilder.getImage(t,s)+")",a&&CodeVeinBuilder.status.display(),CodeVeinBuilder.status.check.equipped(),CodeVeinBuilder.selector.close(),s!=n&&(CodeVeinBuilder.updateURL(),CodeVeinBuilder.cache.buildDesc.firstChild&&CodeVeinBuilder.updateDesc(0))}},loadBuild:function(){for(var i,a,o,t,s=e.location.search.slice(1).split("&"),l=0,n=s.length;l<n;l++)if(i=s[l].split("="),/build/i.test(i[0])){a=LZString.decompressFromEncodedURIComponent(i[1]).split("|"),CodeVeinBuilder.build=a;for(var r,d,u=0,c=a.length;u<c;u++)d=(r=CodeVeinBuilder.cache.build[u]).dataset.type,r.dataset.id=a[u],r.style.backgroundImage=0==a[u]?"":"url("+CodeVeinBuilder.getImage(d,a[u])+")",0!=a[u]&&/blood_code|passive|weapon|blood_veil|transform/.test(d)&&CodeVeinBuilder.status.update({type:u,id:a[u]})}else if(/context/i.test(i[0]))try{o=LZString.decompressFromEncodedURIComponent(i[1]).split("|"),t=CodeVeinBuilder.presets[o[0]][o[1]],CodeVeinBuilder.updateDesc({title:o[1],desc:t[1],author:t[2]?t[2].split("|"):""})}catch(e){console.error(e),CodeVeinBuilder.updateDesc(0)}!o&&CodeVeinBuilder.cache.buildDesc.firstChild&&CodeVeinBuilder.updateDesc(0),CodeVeinBuilder.status.display(),CodeVeinBuilder.status.check.equipped()},randBuild:function(){for(var e,i,a,o=0,t=CodeVeinBuilder.build.length,s={weapon:[],passive:[],active:[]};o<t;o++)if(0==o)CodeVeinBuilder.build[o]=_randKey(CodeVeinBuilder.data.blood_code),i=CodeVeinBuilder.data.blood_code[CodeVeinBuilder.build[0]].stats;else if(1==o||2==o){for(;;)if(e=_randKey(CodeVeinBuilder.data.weapon),-1==s.weapon.indexOf(e)&&""==CodeVeinBuilder.status.check.stats("weapon",e,i)){CodeVeinBuilder.build[o]=e,s.weapon.push(e);break}}else if(3==o){for(;;)if(e=_randKey(CodeVeinBuilder.data.blood_veil),""==CodeVeinBuilder.status.check.stats("blood_veil",e,i)){CodeVeinBuilder.build[o]=e;break}}else if(4==o||5==o||6==o)CodeVeinBuilder.build[o]=0==Math.floor(2*Math.random())?0:_randKey(CodeVeinBuilder.data.transform);else if(7==o||8==o||9==o||10==o){for(;;)if(e=_randKey(CodeVeinBuilder.data.passive),a=CodeVeinBuilder.data.passive[e].blood_code_req,-1==s.passive.indexOf(e)&&(!a||a==CodeVeinBuilder.build[0])){CodeVeinBuilder.build[o]=e,s.passive.push(e);break}}else if(11==o||12==o||13==o||14==o||15==o||16==o||17==o||18==o)for(;;)if(e=_randKey(CodeVeinBuilder.data.active),a=CodeVeinBuilder.data.active[e].blood_code_req,-1==s.active.indexOf(e)&&""==CodeVeinBuilder.status.check.stats("active",e,i)&&(!a||a==CodeVeinBuilder.build[0])){CodeVeinBuilder.build[o]=e,s.active.push(e);break}},updateURL:function(a){if(e.history&&e.history.pushState){var o="";/lang=/i.test(e.location.search)&&(o=e.location.search.match(/lang=.*?(?:&|$)/i))&&o[0]&&(o="&"+o[0]),e.history.pushState({},i.title,e.location.href.replace(e.location.search,"")+"?build="+LZString.compressToEncodedURIComponent(CodeVeinBuilder.build.join("|"))+(/devmode=true/i.test(e.location.search)?"&devmode=true":"")+o+(a?"&context="+LZString.compressToEncodedURIComponent(a.join("|")):""))}},updateDesc:function(e){if(e){var i=/u\//.test(e.author[0]);CodeVeinBuilder.cache.buildDesc.innerHTML='<div class="ui-window"><div class="ui-title">'+e.title+'</div><div class="ui-window-inner"><div class="info-group">'+(e.author[0]?'<div class="info-row"><div class="info-label">'+_lang.preset_author+'</div><div class="info-value"><a href="'+(i?"https://reddit.com/":"https://github.com/")+e.author[0]+'" target="_blank">'+e.author[0]+"</a></div></div>":"")+(e.author[1]?'<div class="info-row"><div class="info-label">'+_lang.preset_origin+'</div><div class="info-value"><a href="'+(i?"https://reddit.com/r/codevein/comments/dyrpbu/c/":"https://github.com/SethClydesdale/code-vein-builder/issues/")+e.author[1]+'" target="_blank">'+(i?"reddit":"github")+"</a></div></div>":"")+(e.desc?'<div class="info-row"><div class="info-label">'+_lang.preset_desc+'</div><div class="info-value">'+e.desc+"</div></div>":"")+"</div></div></div>"}else CodeVeinBuilder.cache.buildDesc.innerHTML=""},getImage:function(e,i){if("group"==e||CodeVeinBuilder.data[e][i])return"resources/images/"+e+"/"+("group"==e?i:CodeVeinBuilder.data[e][i].image)+".png";console.error('getImage Error: id "'+i+'" of type "'+e+'" was not found.')},preset:{change:function(i){var a=i.options[i.selectedIndex];if("default"!=a.value){if("submit"==a.value)return void GenkiModal.open({title:a.innerHTML,content:_lang.preset_submit_confirm,callback:function(){var i="file:"==e.location.protocol,a=e.location.href.replace(/\?.*?$/,"");e.location.href=i?a.replace("index.html","submit-build/index.html"):a+"submit-build/"},close:function(){i.selectedIndex=0}});e.localStorage&&"true"==localStorage.noPresetWarning?CodeVeinBuilder.preset.load(i,a):GenkiModal.open({title:"Load Preset?",content:_lang.preset_warn.replace("%{PRESET_NAME}",a.innerHTML)+'<div class="checkbox-zone"><label for="preset_warning"><input id="preset_warning" type="checkbox" onchange="localStorage.noPresetWarning = this.checked;"> '+_lang.preset_stop_warning+"</label></div>",callback:function(){CodeVeinBuilder.preset.load(i,a)},close:function(){i.selectedIndex=0}})}},load:function(e,i){var a=i.dataset.group?[i.dataset.group,i.innerHTML]:null,o=a?CodeVeinBuilder.presets[a[0]][a[1]]:"";"random"==i.value?CodeVeinBuilder.randBuild():CodeVeinBuilder.build=LZString.decompressFromEncodedURIComponent(i.value).split("|"),"string"!=typeof o?(CodeVeinBuilder.updateURL(a),CodeVeinBuilder.updateDesc({title:a[1],desc:o[1],author:o[2]?o[2].split("|"):""})):(CodeVeinBuilder.updateURL(),CodeVeinBuilder.updateDesc(0)),CodeVeinBuilder.status.reset(),CodeVeinBuilder.loadBuild(),CodeVeinBuilder.scrollTo("#build-list"),e.selectedIndex=0}},changeLanguage:function(a){var o,t,s=a.options[a.selectedIndex].value;"submit"!=s?"en"!=s?/lang=/i.test(e.location.search)?e.location.search=e.location.search.replace(/lang=.*?(?:&|$)/i,"lang="+s):/build=/i.test(e.location.search)?e.location.search=e.location.search+"&lang="+s:e.location.search="?lang="+s:/lang=/i.test(e.location.search)&&(e.location.href=e.location.href.replace(/(&|\?|)lang=.*?(?:&|$)/,"")):GenkiModal.open({title:a.options[a.selectedIndex].innerHTML,content:_lang.submit_translation_confirm,callback:function(){o="file:"==e.location.protocol,t=e.location.href.replace(/\?.*?$/,""),e.location.href=o?t.replace("index.html","translate/index.html"):t+"translate/"},close:function(){a.selectedIndex=i.getElementById("default-selected").index}})},code:{save:function(){GenkiModal.open({title:_lang.save_build,content:'<div class="info-group">'+_lang.save_build_desc+'</div><div class="share-build-options"><div class="info-group"><div class="info-label"><button class="button copy-button" data-clipboard-target="#copy-url" data-success="'+_lang.copy_success+'" data-original="'+_lang.copy_url+'">'+_lang.copy_url+'</button></div><div class="info-value"><input type="text" id="copy-url" value="'+("file:"==e.location.protocol?"https://sethclydesdale.github.io/code-vein-builder/"+e.location.search:e.location.href)+'"></div></div><div><div class="info-label"><button class="button copy-button" data-clipboard-target="#copy-code" data-success="'+_lang.copy_success+'" data-original="'+_lang.copy_code+'">'+_lang.copy_code+'</button></div><div class="info-value"><input type="text" id="copy-code" value="'+LZString.compressToEncodedURIComponent(CodeVeinBuilder.build.join("|"))+'"></div></div></div>',noFocus:1})},load:function(){GenkiModal.open({title:_lang.load_build,content:'<div class="info-group">'+_lang.load_build_desc+'</div><div class="share-build-options load-build"><div class="info-label">'+_lang.load_build_label+'</div><div class="info-value"><input type="text" id="build_code"></div></div>',buttonText:_lang.load_build,focus:"#build_code",keepOpen:1,callback:function(){var e=i.getElementById("build_code").value;if(!e)return alert(_lang.load_build_error);/build=/i.test(e)&&(e=e.match(/build=(.*?)(?:&|$)/i))&&e[1]&&(e=e[1]);try{CodeVeinBuilder.build=LZString.decompressFromEncodedURIComponent(e).split("|"),CodeVeinBuilder.updateURL(),CodeVeinBuilder.status.reset(),CodeVeinBuilder.loadBuild(),GenkiModal.close(),CodeVeinBuilder.scrollTo("#build-list")}catch(e){alert(e)}}})}},setupData:function(a){var o=i.createElement("SCRIPT");o.src="resources/lang/"+a+"/lang"+(/devmode=true/i.test(e.location.search)?"":".min")+".js",o.onload=function(){(o=i.createElement("SCRIPT")).src="resources/javascript/data.min.js",o.onload=CodeVeinBuilder.init,i.body.appendChild(o),i.body.className+=" lang-"+a},o.onerror=function(){CodeVeinBuilder.setupData("en")},i.body.appendChild(o)},init:function(){/build=/i.test(e.location.search)?(CodeVeinBuilder.loadBuild(),CodeVeinBuilder.scrollTo("#build-list")):/^\?random/.test(e.location.search)?(CodeVeinBuilder.randBuild(),CodeVeinBuilder.updateURL(),CodeVeinBuilder.loadBuild(),CodeVeinBuilder.scrollTo("#build-list")):CodeVeinBuilder.status.display();var o,t,s,l="",n='<option value="default" selected>'+_lang.preset_default+'</option><option value="submit">'+_lang.preset_submit+'</option><optgroup label="'+_lang.preset_group.initial+'"><option value="AwH17SOrZ4g">'+_lang.preset_empty+'</option><option value="random">'+_lang.preset_random+"</option></optgroup>";for(t in CodeVeinBuilder.languages)o=t.replace(/^\d+ - /,""),l+='<option value="'+CodeVeinBuilder.languages[t]+'"'+(a&&a==CodeVeinBuilder.languages[t]||!a&&"en"==CodeVeinBuilder.languages[t]?' id="default-selected" selected':"")+">"+("submit_translation"==o?_lang[o]:o)+"</option>";for(t in CodeVeinBuilder.presets){n+='<optgroup label="'+_lang.preset_group[t.replace(/^\d+ - /,"")]+'">';for(s in CodeVeinBuilder.presets[t])n+='<option value="'+("string"==typeof CodeVeinBuilder.presets[t][s]?CodeVeinBuilder.presets[t][s]:CodeVeinBuilder.presets[t][s][0])+'" data-group="'+t+'">'+s+"</option>";n+="</optgroup>"}CodeVeinBuilder.cache.infoColumn.options.innerHTML='<div class="ui-window"><div class="ui-title">'+_lang.options+'</div><div class="ui-window-inner"><div class="info-group center"><div class="info-row"><button class="button" onclick="CodeVeinBuilder.code.save();"><i class="fa">&#xf0c7;</i>'+_lang.save_build+'</button><button class="button" onclick="CodeVeinBuilder.code.load();"><i class="fa">&#xf019;</i>'+_lang.load_build+'</button></div><div class="info-row"><select onchange="CodeVeinBuilder.preset.change(this);">'+n+'</select></div></div><div class="info-group"><div class="info-row"><div class="info-label">'+_lang.lang_select+'</div><div class="info-value"><select onchange="CodeVeinBuilder.changeLanguage(this);">'+l+"</select></div></div></div></div></div>",e.onpopstate=function(){/build=/i.test(e.location.search)&&(CodeVeinBuilder.status.reset(),CodeVeinBuilder.loadBuild(),CodeVeinBuilder.selector.isOpen&&CodeVeinBuilder.selector.close(),GenkiModal.isOpen&&GenkiModal.close())},new ClipboardJS(".copy-button").on("success",function(i){var a=i.trigger;a.innerHTML!=a.dataset.success&&(a.innerHTML=a.dataset.success,e.setTimeout(function(){a.innerHTML=a.dataset.original},1e3))}),i.onkeydown=function(e){if(CodeVeinBuilder.selector.isOpen)switch(e.key){case"Left":case"ArrowLeft":CodeVeinBuilder.selector.moveActive("left"),e.preventDefault();break;case"Right":case"ArrowRight":CodeVeinBuilder.selector.moveActive("right"),e.preventDefault();break;case"Spacebar":case" ":var a=i.querySelector(".ui-group-active");a&&(a.nextSibling?a.nextSibling.click():i.querySelector(".ui-group-all").click()),e.preventDefault();break;case"Enter":CodeVeinBuilder.selector.change(CodeVeinBuilder.selector.active,CodeVeinBuilder.selector.activeCaller),e.preventDefault();break;case"Esc":case"Escape":CodeVeinBuilder.selector.close(),e.preventDefault();break;case"Up":case"ArrowUp":e.preventDefault();break;case"Down":case"ArrowDown":e.preventDefault()}}}},/lang=/i.test(e.location.search)){var a=e.location.search.match(/lang=(.*?)(?:&|$)/i);a&&a[1]?CodeVeinBuilder.setupData(a[1].toLowerCase()):CodeVeinBuilder.setupData("en")}else CodeVeinBuilder.setupData("en")}(window,document);